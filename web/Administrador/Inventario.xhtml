<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml"   
      xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:ui = "http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Custom fonts for this template-->
        <link href="../Files/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"/>
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet"/>

        <!-- Custom styles for this template-->
        <link href="../Files/css/sb-admin-2.min.css" rel="stylesheet"/>
        <!-- Custom styles for this page -->
        <link href="../Files/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet"></link>
        <link href="../Files/inventario/css/botones.css" rel='stylesheet' type='text/css' />
        <link href="../Files/inventario/css/style.css" rel='stylesheet' type='text/css' />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
        <title>Sistema de gestión de riesgos</title>
        
        <style>
            
        </style>
    </h:head>

    <h:body id="page-top"> 

        <!-- Growl para la muestra de mensajes -->
        <p:growl id="growl" showDetail="true" sticky="true" />  

        <div id="wrapper">
            <!-- Sidebar -->
            <ui:insert name = "barralateral" >
                <ui:include src = "../Templates/BarraLateral.xhtml" />
            </ui:insert>    
            <!-- End of Sidebar -->

            <div id="content-wrapper" class="d-flex flex-column">
                <!-- Main Content -->
                <div id="content">
                    <!-- Topbar -->
                    <ui:insert name = "Topbar" >
                        <ui:include src = "../Templates/BarraNavegacion.xhtml" />
                    </ui:insert>    
                    <!-- End Topbar -->
                    <!-- Begin Page Content -->
                    <div class="row mx-4">
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-2 r" >
                                <div class="col-md-8 reactivos">
                                    <a class="tituloP">Registros</a><br/>
                                    <a class="tituloG" href="AdministrarReactivos.xhtml">Reactivos</a>
                                </div>
                                <div class="col-md-4 cantidad align-self-center">
                                    <label>#{DatosReactivos.datosReactivo.size()}</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-2 m">
                                <div class="col-md-8 material">
                                    <a class="tituloP">Registros</a><br/>
                                    <a class="tituloG" href="AdministrarMaterial.xhtml">Material</a>
                                </div>
                                <div class="col-md-4 cantidad align-self-center">
                                    <label>#{DatosMaterial.datosMaterial.size()}</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-1 e">
                                <div class="col-md-8 equipo">
                                    <a class="tituloP">Registros</a><br/>
                                    <a class="tituloG" href="AdministrarEquipo.xhtml">Equipo</a>
                                </div>
                                <div class="col-md-4 cantidad align-self-center">
                                    <label>#{DatosEquipoLaboratorio.datosEquipo.size()}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mx-4 my-4">
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-2" >
                                <div class="col-md-12 card shadow p-3">
                                    <canvas id="polar-reactivo" width="100%" ></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-2" >
                                <div class="col-md-12 card shadow p-3">
                                    <canvas id="bar-material" width="100%" height="100%"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xs-12 col-md-4">
                            <div class="row mr-md-1" >
                                <div class="col-md-12 card shadow p-3">
                                    <canvas id="bar-equipo" width="100%" height="100%"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mx-4 my-4">
                        <div class="col-xs-12 col-lg-4">
                            <div class="row mr-md-2" >
                                <div class="col-md-12 card shadow p-3">
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Explosivos
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar explosivo" style="width:#{DatosReactivos.porcentajeReactivo('Explosivo')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Explosivo")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Inflamables
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar inflamable" style="width:#{DatosReactivos.porcentajeReactivo('Inflamable')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Inflamable")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Gases a presión
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar presion" style="width:#{DatosReactivos.porcentajeReactivo('Gas a presión')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Gas a presión")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Comburentes
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar comburente" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia comburente')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia comburente")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Perjudiciales
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar perjudicial" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia perjudicial para la salud')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia perjudicial para la salud")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Corrosivas 
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar corrosiva" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia corrosiva')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia corrosiva")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Nosivas
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar nosiva" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia nosiva')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia nosiva")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Tóxicas
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar toxica" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia tóxica')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia tóxica")}%</span> 
                                        </div>
                                    </div>
                                    
                                    <div class="row p-2">
                                        <div style="width:40%">
                                            Peligrosas
                                        </div>
                                        
                                        <div style="width:48%">
                                            <div class="progress progress-striped active progress-right">
                                                <div class="bar peligrosas" style="width:#{DatosReactivos.porcentajeReactivo('Sustancia peligrosas para el medio ambiente')}%"></div> 
                                            </div>
                                        </div>
                                        
                                        <div style="width:12%" align="right">
                                            <span class="pull-right">#{DatosReactivos.porcentajeReactivo("Sustancia peligrosas para el medio ambiente")}%</span> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xs-12 col-lg-8">
                            <div class="row mr-md-1" >
                                <div class="col-md-12 card shadow p-3">
                                    <canvas width="100%" height="100%" ></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FOOTER -->
                </div>
            </div>  
        </div>

        <!-- Scroll to Top Button-->
        <a class="scroll-to-top rounded" href="#page-top">
            <i class="fas fa-angle-up"></i>
        </a>

        <!-- Logout Modal-->
        <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                        <a class="btn btn-primary" href="login.html">Logout</a>
                    </div>
                </div>
            </div>
        </div>
        <script src="../Files/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="../Files/js/sb-admin-2.min.js"></script>
        <script>
            var materiales = [];
            var cantidadMaterial = [];
            var equipo = [];
            var cantidadEquipo = [];
            
            function nombresEquipo() {
                equipo = [];
                let i = 0;
                while (true) {
                    
                    if (i === 0){
                        equipo.push(String("#{DatosEquipoLaboratorio.nombreEquipo(0)}").substr(0, 6));
                    }
                    else if (i === 1){
                        equipo.push(String("#{DatosEquipoLaboratorio.nombreEquipo(1)}").substr(0, 6));
                    }
                    else if (i === 2){
                        equipo.push(String("#{DatosEquipoLaboratorio.nombreEquipo(2)}").substr(0, 6));
                    }
                    else if (i === 3){
                        equipo.push(String("#{DatosEquipoLaboratorio.nombreEquipo(3)}").substr(0, 6));
                    }
                    else if (i === 4){
                        equipo.push(String("#{DatosEquipoLaboratorio.nombreEquipo(4)}").substr(0, 6));
                    }
                    i++;
                    if (i >= #{DatosEquipoLaboratorio.datosEquipo.size()} || i === 5) {
                        break;
                    }
                }
                return equipo;
            }
            
            function cantidadesEquipo() {
                cantidadEquipo = [];
                let i = 0;
                while (true) {
                    
                    if (i === 0){
                        cantidadEquipo.push(String("#{DatosEquipoLaboratorio.cantidadEquipo(0)}"));
                    }
                    else if (i === 1){
                        cantidadEquipo.push(String("#{DatosEquipoLaboratorio.cantidadEquipo(1)}"));
                    }
                    else if (i === 2){
                        cantidadEquipo.push(String("#{DatosEquipoLaboratorio.cantidadEquipo(2)}"));
                    }
                    else if (i === 3){
                        cantidadEquipo.push(String("#{DatosEquipoLaboratorio.cantidadEquipo(3)}"));
                    }
                    else if (i === 4){
                        cantidadEquipo.push(String("#{DatosEquipoLaboratorio.cantidadEquipo(4)}"));
                    }
                    i++;
                    if (i >= #{DatosEquipoLaboratorio.datosEquipo.size()} || i === 5) {
                        break;
                    }
                }
                return cantidadEquipo;
            }
            
            function nombresMateriales() {
                materiales = [];
                let i = 0;
                while (true) {
                    
                    if (i === 0){
                        materiales.push(String("#{DatosMaterial.nombreMaterial(0)}").substr(0, 6));
                    }
                    else if (i === 1){
                        materiales.push(String("#{DatosMaterial.nombreMaterial(1)}").substr(0, 6));
                    }
                    else if (i === 2){
                        materiales.push(String("#{DatosMaterial.nombreMaterial(2)}").substr(0, 6));
                    }
                    else if (i === 3){
                        materiales.push(String("#{DatosMaterial.nombreMaterial(3)}").substr(0, 6));
                    }
                    else if (i === 4){
                        materiales.push(String("#{DatosMaterial.nombreMaterial(4)}").substr(0, 6));
                    }
                    i++;
                    if (i >= #{DatosMaterial.datosMaterial.size()} || i === 5) {
                        break;
                    }
                }
                return materiales;
            }
            
            function cantidadesMateriales() {
                cantidadMaterial = [];
                let i = 0;
                while (true) {
                    
                    if (i === 0){
                        cantidadMaterial.push(String("#{DatosMaterial.cantidadMaterial(0)}"));
                    }
                    else if (i === 1){
                        cantidadMaterial.push(String("#{DatosMaterial.cantidadMaterial(1)}"));
                    }
                    else if (i === 2){
                        cantidadMaterial.push(String("#{DatosMaterial.cantidadMaterial(2)}"));
                    }
                    else if (i === 3){
                        cantidadMaterial.push(String("#{DatosMaterial.cantidadMaterial(3)}"));
                    }
                    else if (i === 4){
                        cantidadMaterial.push(String("#{DatosMaterial.cantidadMaterial(4)}"));
                    }
                    i++;
                    if (i >= #{DatosMaterial.datosMaterial.size()} || i === 5) {
                        break;
                    }
                }
                return cantidadMaterial;
            }
            
            new Chart(document.getElementById("polar-reactivo"), {
                type: 'polarArea',
                data: {
                    labels: ["Explosivos", "Gases líquidos o sólidos inflamables", "Gases a presión", "Sustancias comburentes", 
                             "Sustancias perjudiciales para la salud", "Sustancias corrosivas", "Sustancias nosivas", 
                             "Sustancias tóxicas", "Sustancias peligrosas para el medio ambiente"],
                    datasets: [{
                            label: "Population (millions)",
                            backgroundColor: ["#A61308", "#3e95cd", "#A68608", "#8EA608", "#00A811", "#00A897", "#005CA8", "#3100A8", "#8000A8"],
                            data: [#{DatosReactivos.cantidadReactivos("Explosivo")}, #{DatosReactivos.cantidadReactivos("Inflamable")}, 
                                   #{DatosReactivos.cantidadReactivos("Gas a presión")}, #{DatosReactivos.cantidadReactivos("Sustancia comburente")},
                                   #{DatosReactivos.cantidadReactivos("Sustancia perjudicial para la salud")},
                                   #{DatosReactivos.cantidadReactivos("Sustancia corrosiva")}, #{DatosReactivos.cantidadReactivos("Sustancia nosiva")}, 
                                   #{DatosReactivos.cantidadReactivos("Sustancia tóxica")},
                                   #{DatosReactivos.cantidadReactivos("Sustancia peligrosas para el medio ambiente")}]
                        }
                    ]
                },
                options: {
                    legend: {
                        position: 'bottom',
                        display: false
                    }
                }
            });
            
            new Chart(document.getElementById("bar-material"), {
                type: 'bar',
                data: {
                    labels: nombresMateriales(),
                    datasets: [
                        {
                            label: "Piezas",
                            backgroundColor: ["#3e95cd", "#00A811", "#00A897", "#005CA8", "#8000A8"],
                            data: cantidadesMateriales()
                        }
                    ]
                },
                options: {
                    legend: { 
                        display: false 
                    },
                    title: {
                        display: true,
                        //text: 'Predicted world population (millions) in 2050'
                    }
                }
            });
            
            new Chart(document.getElementById("bar-equipo"), {
                type: 'bar',
                data: {
                    labels: nombresEquipo(),
                    datasets: [
                        {
                            label: "Piezas",
                            backgroundColor: ["#3e95cd", "#00A811", "#00A897", "#005CA8", "#8000A8"],
                            data: cantidadesEquipo()
                        }
                    ]
                },
                options: {
                    legend: { 
                        display: false 
                    },
                    title: {
                        display: true,
                        //text: 'Predicted world population (millions) in 2050'
                    }
                }
            });
        </script>

    </h:body>
</html>


<!--
    IMPORTANTE LEER:
    El template principal manda a llarmar a los templates de la carpeta Template
    Este es el cascaron principal y va cambiando dependiendo de la pagina
    Si quieres modicar algo modifica los archivos de la carpeta Template
-->
